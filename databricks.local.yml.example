# ─── LOCAL CONFIG TEMPLATE ────────────────────────────────────────────────────
# Copy this file to databricks.local.yml, fill in your workspace values, then
# rename to databricks.yml when deploying to your target workspace.
# databricks.local.yml is gitignored to keep sensitive IDs/URLs out of git.
#
# TO USE:
#   cp databricks.local.yml.example databricks.local.yml
#   # Edit databricks.local.yml with your workspace values
#   cp databricks.local.yml databricks.yml
#   databricks bundle deploy --target my-workspace
#   git checkout databricks.yml   # restore the generic version

bundle:
  name: actuarial-workshop

variables:
  catalog:
    description: "Unity Catalog catalog name — must already exist"
    default: my_catalog

  schema:
    description: "UC schema name — will be created if it does not exist"
    default: actuarial_workshop

  endpoint_name:
    description: "Name for the SARIMA Model Serving endpoint"
    default: actuarial-workshop-sarima-forecaster

  warehouse_id:
    description: "SQL Warehouse ID for the Statement Execution API (used by the app)"
    default: ""

  pg_host:
    description: "Lakebase (managed Postgres) hostname. Leave empty to disable Lakebase."
    default: ""

  pg_database:
    description: "Lakebase database name"
    default: actuarial_workshop_db

  notification_email:
    description: "Email address for job failure notifications (optional)"
    default: ""

include:
  - resources/*.yml

targets:

  dev:
    default: true
    mode: development
    variables:
      catalog: my_catalog          # ← replace with your catalog
      schema: actuarial_workshop

  # ── Your production/named workspace target ───────────────────────────────────
  my-workspace:
    workspace:
      host: https://your-workspace.cloud.databricks.com   # ← replace
      profile: your-profile                               # ← replace (from ~/.databrickscfg)
    variables:
      catalog: your_catalog                               # ← replace
      schema: actuarial_workshop
      endpoint_name: actuarial-workshop-sarima-forecaster
      warehouse_id: "your_warehouse_id"                   # ← replace (from workspace SQL settings)
      pg_host: "your-lakebase-host.database.cloud.databricks.com"  # ← optional
      pg_database: actuarial_workshop_db
      notification_email: your.email@example.com         # ← optional
